<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="notice">
	<resultMap id="resultNotice" type="Notice">
		<id property="noticeNo" column="notice_No"/>
		<result property="noticeTitle" column="Notice_Title"/>
		<result property="noticeContent" column="Notice_Content"/>
		<result property="noticeDate" column="Notice_DT"/>
		<result property="noticeReadCnt" column="Notice_Read_Cnt"/>
	</resultMap>
<!-- 01. 게시글 전체 목록 조회 -->
    <select id="listAll" resultType="com.godsky.findlove.main.noticeboard.model.vo.Notice" resultMap="resultNotice">
        SELECT 
			notice_No,
			notice_Title,
			notice_Content,
			notice_DT,
			notice_Read_Cnt
        FROM 
            TB_NOTICE
        ORDER BY 
            notice_NO desc, 	
            notice_DT desc
    </select>
    <update id="increaseViewcnt">
        UPDATE TB_NOTICE SET Notice_Read_Cnt = Notice_Read_Cnt + 1 
        WHERE NOTICE_NO = #{noticeNo}
    </update>
        <select id="view" resultType="com.godsky.findlove.main.noticeboard.model.vo.Notice" resultMap="resultNotice">
        SELECT * FROM TB_NOTICE 
        WHERE notice_No = #{notice_No}
    </select>
    <select id="PNwriterList" resultType="com.godsky.findlove.main.noticeboard.model.vo.Notice" resultMap="resultNotice">
    <![CDATA[SELECT * FROM TB_NOTICE WHERE NOTICE_NO = #{noticeNo}]]>
    </select>
    <select id="getNoticeCnt" resultType="int">
    SELECT COUNT(*) FROM TB_NOTICE
    </select>
        <select id="prev" parameterType="int" resultType="string" >
    <![CDATA[
    SELECT NOTICE_TITLE FROM (SELECT * FROM TB_NOTICE WHERE NOTICE_NO < #{noticeNo} ORDER BY NOTICE_NO DESC) WHERE ROWNUM = 1
    ]]>
    </select>
    <select id="next" parameterType="int" resultType="string" >
    <![CDATA[
    SELECT NOTICE_TITLE FROM (SELECT * FROM TB_NOTICE WHERE NOTICE_NO > #{noticeNo} ORDER BY NOTICE_NO ASC) WHERE ROWNUM = 1
    ]]>
    </select>
</mapper>
